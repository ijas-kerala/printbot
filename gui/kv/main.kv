#:kivy 2.0.0

<MainScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 20
        canvas.before:
            Color:
                rgba: 0.95, 0.95, 0.95, 1
            Rectangle:
                pos: self.pos
                size: self.size

        # Header
        Label:
            text: "PrintBot"
            font_size: '48sp'
            bold: True
            color: 0.2, 0.2, 0.2, 1
            size_hint_y: 0.15

        # Main Content Area
        BoxLayout:
            orientation: 'horizontal'
            spacing: 50
            size_hint_y: 0.7

            # Left: QR Code
            AsyncImage:
                source: root.qr_code_path
                allow_stretch: True
                keep_ratio: True
                size_hint_x: 0.5

            # Right: Instructions
            BoxLayout:
                orientation: 'vertical'
                size_hint_x: 0.5
                spacing: 10
                
                Label:
                    text: "Scan to Print"
                    font_size: '32sp'
                    bold: True
                    color: 0.1, 0.6, 0.9, 1
                    halign: 'left'
                    text_size: self.size

                Label:
                    text: "1. Scan QR Code\n2. Upload File\n3. Pay & Print"
                    font_size: '24sp'
                    color: 0.3, 0.3, 0.3, 1
                    halign: 'left'
                    text_size: self.size
                    line_height: 1.5

        # Status Bar
        Label:
            text: root.status_text
            font_size: '24sp'
            color: 1, 1, 1, 1
            size_hint_y: 0.1
            canvas.before:
                Color:
                    rgba: (0.1, 0.7, 0.3, 1) if root.status_text == "Ready" else (0.9, 0.6, 0.1, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10,]

        # Footer / Admin
        Button:
            text: "Admin Login"
            size_hint_y: 0.05
            background_color: 0, 0, 0, 0
            color: 0.6, 0.6, 0.6, 1
            on_press: root.open_admin_login()

<AdminPopup>:
    title: "Admin Access"
    size_hint: 0.6, 0.4
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 10
        
        TextInput:
            id: pin_input
            hint_text: "Enter Admin PIN"
            password: True
            multiline: False
            
        Button:
            text: "Login"
            on_release: root.verify_pin(pin_input.text)
